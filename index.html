<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ø¨Ø·Ø§Ù‚Ø§Øª ØªÙ‡Ù†Ø¦Ø© Ø±Ù…Ø¶Ø§Ù†</title>
<link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Tajawal:wght@300;400;500;700;800&family=Reem+Kufi:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
  :root {
    --gold: #D4A548;
    --gold-light: #F0D78C;
    --gold-dark: #B8860B;
    --deep-navy: #0A1628;
    --navy: #0F2042;
    --navy-light: #1A3060;
    --emerald: #1B6B4A;
    --emerald-light: #2D9B6E;
    --cream: #FFF8E7;
    --white: #FFFFFF;
    --purple-deep: #1A0A2E;
    --teal: #0D4F4F;
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    font-family: 'Tajawal', sans-serif;
    background: var(--deep-navy);
    min-height: 100vh;
    overflow-x: hidden;
    color: var(--cream);
  }

  /* === Stars Background === */
  .stars-container {
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    pointer-events: none;
    z-index: 0;
    overflow: hidden;
  }

  .star {
    position: absolute;
    width: 2px; height: 2px;
    background: var(--gold-light);
    border-radius: 50%;
    animation: twinkle var(--dur) ease-in-out infinite;
    opacity: 0;
  }

  @keyframes twinkle {
    0%, 100% { opacity: 0.1; transform: scale(0.8); }
    50% { opacity: 0.9; transform: scale(1.2); }
  }

  /* === Header === */
  .header {
    position: relative;
    z-index: 2;
    text-align: center;
    padding: 50px 20px 30px;
  }

  .header-crescent {
    font-size: 60px;
    margin-bottom: 10px;
    animation: float 4s ease-in-out infinite;
    filter: drop-shadow(0 0 20px rgba(212, 165, 72, 0.5));
  }

  @keyframes float {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-12px); }
  }

  .header h1 {
    font-family: 'Reem Kufi', sans-serif;
    font-size: clamp(2rem, 5vw, 3.5rem);
    font-weight: 700;
    background: linear-gradient(135deg, var(--gold-light), var(--gold), var(--gold-dark));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    margin-bottom: 8px;
    letter-spacing: 1px;
  }

  .header p {
    font-family: 'Amiri', serif;
    font-size: 1.15rem;
    color: rgba(255, 248, 231, 0.6);
    font-weight: 400;
  }

  /* === Card Builder === */
  .builder-section {
    position: relative;
    z-index: 2;
    max-width: 1200px;
    margin: 0 auto;
    padding: 20px;
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 40px;
    align-items: start;
  }

  @media (max-width: 900px) {
    .builder-section { grid-template-columns: 1fr; }
  }

  /* === Controls Panel === */
  .controls-panel {
    background: rgba(15, 32, 66, 0.7);
    backdrop-filter: blur(20px);
    border: 1px solid rgba(212, 165, 72, 0.2);
    border-radius: 20px;
    padding: 30px;
  }

  .controls-panel h2 {
    font-family: 'Reem Kufi', sans-serif;
    color: var(--gold);
    font-size: 1.4rem;
    margin-bottom: 24px;
    display: flex;
    align-items: center;
    gap: 10px;
  }

  .control-group {
    margin-bottom: 22px;
  }

  .control-group label {
    display: block;
    font-size: 0.95rem;
    font-weight: 500;
    color: var(--gold-light);
    margin-bottom: 10px;
  }

  .control-group input[type="text"],
  .control-group textarea {
    width: 100%;
    padding: 12px 16px;
    background: rgba(10, 22, 40, 0.8);
    border: 1px solid rgba(212, 165, 72, 0.25);
    border-radius: 12px;
    color: var(--cream);
    font-family: 'Tajawal', sans-serif;
    font-size: 1rem;
    outline: none;
    transition: border-color 0.3s;
    direction: rtl;
  }

  .control-group input:focus,
  .control-group textarea:focus {
    border-color: var(--gold);
    box-shadow: 0 0 15px rgba(212, 165, 72, 0.15);
  }

  .control-group textarea {
    resize: vertical;
    min-height: 80px;
  }

  /* === Template Selector === */
  .templates-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 10px;
  }

  .template-btn {
    position: relative;
    padding: 14px 8px;
    border: 2px solid rgba(212, 165, 72, 0.2);
    border-radius: 12px;
    background: rgba(10, 22, 40, 0.6);
    color: var(--cream);
    cursor: pointer;
    font-family: 'Tajawal', sans-serif;
    font-size: 0.8rem;
    font-weight: 500;
    transition: all 0.3s ease;
    text-align: center;
  }

  .template-btn .template-icon {
    font-size: 1.6rem;
    display: block;
    margin-bottom: 4px;
  }

  .template-btn:hover {
    border-color: var(--gold);
    background: rgba(212, 165, 72, 0.1);
    transform: translateY(-2px);
  }

  .template-btn.active {
    border-color: var(--gold);
    background: rgba(212, 165, 72, 0.15);
    box-shadow: 0 0 20px rgba(212, 165, 72, 0.2);
  }

  .template-btn.active::after {
    content: 'âœ“';
    position: absolute;
    top: 4px;
    left: 4px;
    width: 18px; height: 18px;
    background: var(--gold);
    color: var(--deep-navy);
    border-radius: 50%;
    font-size: 0.65rem;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 700;
  }

  /* === Action Buttons === */
  .actions-row {
    display: flex;
    gap: 12px;
    margin-top: 24px;
  }

  .btn-primary, .btn-secondary {
    flex: 1;
    padding: 14px 20px;
    border: none;
    border-radius: 14px;
    font-family: 'Tajawal', sans-serif;
    font-size: 1rem;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
  }

  .btn-primary {
    background: linear-gradient(135deg, var(--gold), var(--gold-dark));
    color: var(--deep-navy);
    box-shadow: 0 4px 20px rgba(212, 165, 72, 0.3);
  }

  .btn-primary:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 30px rgba(212, 165, 72, 0.4);
  }

  .btn-secondary {
    background: rgba(212, 165, 72, 0.1);
    border: 1px solid rgba(212, 165, 72, 0.3);
    color: var(--gold);
  }

  .btn-secondary:hover {
    background: rgba(212, 165, 72, 0.2);
    transform: translateY(-2px);
  }

  /* === Card Preview === */
  .preview-wrapper {
    position: sticky;
    top: 30px;
  }

  .preview-label {
    font-family: 'Reem Kufi', sans-serif;
    color: var(--gold);
    font-size: 1.2rem;
    margin-bottom: 16px;
    text-align: center;
  }

  .card-preview {
    width: 100%;
    aspect-ratio: 4 / 5;
    border-radius: 20px;
    overflow: hidden;
    position: relative;
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5), 0 0 40px rgba(212, 165, 72, 0.15);
    transition: transform 0.5s ease;
  }

  .card-preview:hover {
    transform: scale(1.02);
  }

  .card-canvas {
    width: 100%;
    height: 100%;
    position: relative;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 40px 30px;
    text-align: center;
    overflow: hidden;
  }

  /* === Card Themes === */
  /* Theme 1: Classic Navy & Gold */
  .theme-classic {
    background: linear-gradient(180deg, #0A1628 0%, #0F2042 40%, #1A3060 100%);
  }

  .theme-classic .card-ornament-top,
  .theme-classic .card-ornament-bottom {
    position: absolute;
    width: 100%;
    height: 120px;
    left: 0;
    pointer-events: none;
  }

  .theme-classic .card-ornament-top { top: 0; }
  .theme-classic .card-ornament-bottom { bottom: 0; transform: rotate(180deg); }

  /* Theme 2: Emerald Garden */
  .theme-emerald {
    background: linear-gradient(160deg, #0B3D2E 0%, #1B6B4A 50%, #0D4F4F 100%);
  }

  /* Theme 3: Royal Purple */
  .theme-purple {
    background: linear-gradient(160deg, #1A0A2E 0%, #2D1B4E 50%, #1A0A2E 100%);
  }

  /* Theme 4: Sunset Warmth */
  .theme-sunset {
    background: linear-gradient(160deg, #4A1A00 0%, #8B3A0F 40%, #C45A1A 100%);
  }

  /* Theme 5: White Elegance */
  .theme-white {
    background: linear-gradient(180deg, #FFFEF5 0%, #F5ECD7 50%, #EDE3C8 100%);
  }

  .theme-white .card-greeting,
  .theme-white .card-message,
  .theme-white .card-sender {
    color: #2A1F0A !important;
  }

  .theme-white .card-greeting {
    background: linear-gradient(135deg, #B8860B, #8B6914) !important;
    -webkit-background-clip: text !important;
    -webkit-text-fill-color: transparent !important;
    background-clip: text !important;
  }

  /* Theme 6: Teal Serenity */
  .theme-teal {
    background: linear-gradient(160deg, #042F2E 0%, #0D4F4F 50%, #134E4A 100%);
  }

  /* === Card Content Styling === */
  .card-decorations {
    position: absolute;
    inset: 0;
    pointer-events: none;
    overflow: hidden;
  }

  .card-geometric {
    position: absolute;
    border: 1px solid rgba(212, 165, 72, 0.15);
    border-radius: 50%;
  }

  .card-lantern {
    position: absolute;
    font-size: 2.5rem;
    opacity: 0.3;
    animation: sway 5s ease-in-out infinite;
  }

  @keyframes sway {
    0%, 100% { transform: rotate(-3deg); }
    50% { transform: rotate(3deg); }
  }

  .card-crescent-deco {
    font-size: 4.5rem;
    margin-bottom: 10px;
    filter: drop-shadow(0 0 25px rgba(212, 165, 72, 0.6));
    animation: glow-pulse 3s ease-in-out infinite;
  }

  @keyframes glow-pulse {
    0%, 100% { filter: drop-shadow(0 0 20px rgba(212, 165, 72, 0.4)); }
    50% { filter: drop-shadow(0 0 35px rgba(212, 165, 72, 0.8)); }
  }

  .card-greeting {
    font-family: 'Reem Kufi', sans-serif;
    font-size: clamp(1.6rem, 4vw, 2.4rem);
    font-weight: 700;
    color: var(--gold-light);
    line-height: 1.5;
    margin-bottom: 16px;
    text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
  }

  .card-divider {
    width: 80px;
    height: 2px;
    background: linear-gradient(90deg, transparent, var(--gold), transparent);
    margin: 0 auto 16px;
  }

  .card-message {
    font-family: 'Amiri', serif;
    font-size: clamp(0.95rem, 2vw, 1.15rem);
    color: rgba(255, 248, 231, 0.85);
    line-height: 1.9;
    max-width: 85%;
    margin: 0 auto 20px;
  }

  .card-sender {
    font-family: 'Tajawal', sans-serif;
    font-size: 0.95rem;
    color: var(--gold);
    font-weight: 500;
    opacity: 0.9;
  }

  .card-border-frame {
    position: absolute;
    inset: 12px;
    border: 1px solid rgba(212, 165, 72, 0.2);
    border-radius: 12px;
    pointer-events: none;
  }

  .card-corner {
    position: absolute;
    width: 20px; height: 20px;
    border-color: var(--gold);
    border-style: solid;
    opacity: 0.5;
  }
  .card-corner.tl { top: 8px; right: 8px; border-width: 2px 2px 0 0; border-radius: 0 6px 0 0; }
  .card-corner.tr { top: 8px; left: 8px; border-width: 2px 0 0 2px; border-radius: 6px 0 0 0; }
  .card-corner.bl { bottom: 8px; right: 8px; border-width: 0 2px 2px 0; border-radius: 0 0 6px 0; }
  .card-corner.br { bottom: 8px; left: 8px; border-width: 0 0 2px 2px; border-radius: 0 0 0 6px; }

  /* === Islamic Pattern Overlay === */
  .islamic-pattern {
    position: absolute;
    top: 0; left: 0;
    width: 100%; height: 100%;
    opacity: 0.04;
    background-image:
      repeating-conic-gradient(from 0deg at 50% 50%, transparent 0deg 60deg, rgba(212, 165, 72, 0.5) 60deg 120deg);
    background-size: 60px 60px;
    pointer-events: none;
  }

  /* === Sparkle Particles on Card === */
  .card-sparkle {
    position: absolute;
    width: 4px; height: 4px;
    background: var(--gold-light);
    border-radius: 50%;
    animation: sparkle-float var(--dur) ease-in-out infinite;
    opacity: 0;
  }

  @keyframes sparkle-float {
    0%, 100% { opacity: 0; transform: translateY(0) scale(0.5); }
    50% { opacity: 0.7; transform: translateY(-20px) scale(1); }
  }

  /* === Ready-Made Cards Gallery === */
  .gallery-section {
    position: relative;
    z-index: 2;
    max-width: 1200px;
    margin: 60px auto 40px;
    padding: 0 20px;
  }

  .gallery-section h2 {
    font-family: 'Reem Kufi', sans-serif;
    text-align: center;
    color: var(--gold);
    font-size: 1.8rem;
    margin-bottom: 30px;
  }

  .gallery-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
    gap: 20px;
  }

  .gallery-card {
    aspect-ratio: 4 / 5;
    border-radius: 16px;
    overflow: hidden;
    cursor: pointer;
    position: relative;
    transition: all 0.4s ease;
    box-shadow: 0 8px 30px rgba(0, 0, 0, 0.3);
  }

  .gallery-card:hover {
    transform: translateY(-8px) scale(1.02);
    box-shadow: 0 16px 50px rgba(212, 165, 72, 0.2);
  }

  .gallery-card-overlay {
    position: absolute;
    inset: 0;
    background: linear-gradient(to top, rgba(0,0,0,0.6), transparent 50%);
    display: flex;
    align-items: flex-end;
    justify-content: center;
    padding: 20px;
    opacity: 0;
    transition: opacity 0.3s;
  }

  .gallery-card:hover .gallery-card-overlay {
    opacity: 1;
  }

  .gallery-card-overlay span {
    background: var(--gold);
    color: var(--deep-navy);
    padding: 8px 20px;
    border-radius: 20px;
    font-weight: 700;
    font-size: 0.9rem;
  }

  /* === Footer === */
  .footer {
    position: relative;
    z-index: 2;
    text-align: center;
    padding: 40px 20px;
    color: rgba(255, 248, 231, 0.3);
    font-size: 0.85rem;
    font-family: 'Amiri', serif;
  }

  /* === Modal === */
  .modal-overlay {
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.8);
    backdrop-filter: blur(10px);
    z-index: 100;
    display: none;
    align-items: center;
    justify-content: center;
    padding: 20px;
  }

  .modal-overlay.active {
    display: flex;
  }

  .modal-content {
    background: var(--navy);
    border: 1px solid rgba(212, 165, 72, 0.3);
    border-radius: 24px;
    padding: 30px;
    max-width: 500px;
    width: 100%;
    text-align: center;
    animation: modal-in 0.4s ease;
  }

  @keyframes modal-in {
    from { opacity: 0; transform: scale(0.9) translateY(20px); }
    to { opacity: 1; transform: scale(1) translateY(0); }
  }

  .modal-content h3 {
    font-family: 'Reem Kufi', sans-serif;
    color: var(--gold);
    font-size: 1.4rem;
    margin-bottom: 12px;
  }

  .modal-content p {
    color: rgba(255, 248, 231, 0.7);
    margin-bottom: 24px;
    line-height: 1.6;
  }

  .modal-close {
    padding: 12px 40px;
    background: linear-gradient(135deg, var(--gold), var(--gold-dark));
    color: var(--deep-navy);
    border: none;
    border-radius: 12px;
    font-family: 'Tajawal', sans-serif;
    font-weight: 700;
    font-size: 1rem;
    cursor: pointer;
    transition: transform 0.2s;
  }

  .modal-close:hover { transform: scale(1.05); }

  /* === Toast === */
  .toast {
    position: fixed;
    bottom: 30px;
    left: 50%;
    transform: translateX(-50%) translateY(100px);
    background: var(--gold);
    color: var(--deep-navy);
    padding: 14px 28px;
    border-radius: 14px;
    font-weight: 700;
    font-size: 0.95rem;
    z-index: 200;
    transition: transform 0.4s ease;
    box-shadow: 0 8px 30px rgba(212, 165, 72, 0.4);
  }

  .toast.show {
    transform: translateX(-50%) translateY(0);
  }

  /* === Scrollbar === */
  ::-webkit-scrollbar { width: 8px; }
  ::-webkit-scrollbar-track { background: var(--deep-navy); }
  ::-webkit-scrollbar-thumb { background: rgba(212, 165, 72, 0.3); border-radius: 4px; }
  ::-webkit-scrollbar-thumb:hover { background: rgba(212, 165, 72, 0.5); }
</style>
</head>
<body>

<!-- Stars Background -->
<div class="stars-container" id="starsContainer"></div>

<!-- Header -->
<header class="header">
  <div class="header-crescent">ğŸŒ™</div>
  <h1>Ø¨Ø·Ø§Ù‚Ø§Øª ØªÙ‡Ù†Ø¦Ø© Ø±Ù…Ø¶Ø§Ù†</h1>
  <p>ØµÙ…Ù‘Ù… Ø¨Ø·Ø§Ù‚ØªÙƒ Ø§Ù„Ø®Ø§ØµØ© ÙˆØ´Ø§Ø±ÙƒÙ‡Ø§ Ù…Ø¹ Ø£Ø­Ø¨Ø§Ø¦Ùƒ</p>
</header>

<!-- Builder Section -->
<section class="builder-section">
  <!-- Controls -->
  <div class="controls-panel">
    <h2>âœ¨ ØªØ®ØµÙŠØµ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø©</h2>

    <div class="control-group">
      <label>ğŸ¨ Ø§Ø®ØªØ± Ø§Ù„Ù‚Ø§Ù„Ø¨</label>
      <div class="templates-grid">
        <button class="template-btn active" data-theme="classic" onclick="selectTheme('classic', this)">
          <span class="template-icon">ğŸŒ™</span>
          ÙƒÙ„Ø§Ø³ÙŠÙƒÙŠ
        </button>
        <button class="template-btn" data-theme="emerald" onclick="selectTheme('emerald', this)">
          <span class="template-icon">ğŸŒ¿</span>
          Ø²Ù…Ø±Ø¯ÙŠ
        </button>
        <button class="template-btn" data-theme="purple" onclick="selectTheme('purple', this)">
          <span class="template-icon">ğŸ‘‘</span>
          Ù…Ù„ÙƒÙŠ
        </button>
        <button class="template-btn" data-theme="sunset" onclick="selectTheme('sunset', this)">
          <span class="template-icon">ğŸŒ…</span>
          ØºØ±ÙˆØ¨
        </button>
        <button class="template-btn" data-theme="white" onclick="selectTheme('white', this)">
          <span class="template-icon">ğŸ•Šï¸</span>
          Ø£Ù†ÙŠÙ‚
        </button>
        <button class="template-btn" data-theme="teal" onclick="selectTheme('teal', this)">
          <span class="template-icon">ğŸ’</span>
          ÙÙŠØ±ÙˆØ²ÙŠ
        </button>
      </div>
    </div>

    <div class="control-group">
      <label>ğŸ“ Ø¹Ø¨Ø§Ø±Ø© Ø§Ù„ØªÙ‡Ù†Ø¦Ø©</label>
      <input type="text" id="greetingInput" value="Ø±Ù…Ø¶Ø§Ù† ÙƒØ±ÙŠÙ…" placeholder="Ø§ÙƒØªØ¨ Ø¹Ø¨Ø§Ø±Ø© Ø§Ù„ØªÙ‡Ù†Ø¦Ø©..." oninput="updateCard()">
    </div>

    <div class="control-group">
      <label>ğŸ’Œ Ø±Ø³Ø§Ù„Ø© Ø®Ø§ØµØ©</label>
      <textarea id="messageInput" placeholder="Ø§ÙƒØªØ¨ Ø±Ø³Ø§Ù„ØªÙƒ Ù‡Ù†Ø§..." oninput="updateCard()">Ø£Ø¹Ø§Ø¯Ù‡ Ø§Ù„Ù„Ù‡ Ø¹Ù„ÙŠÙƒÙ… Ø¨Ø§Ù„Ø®ÙŠØ± ÙˆØ§Ù„Ø¨Ø±ÙƒØ§ØªØŒ ÙˆØ¬Ø¹Ù„ Ø£ÙŠØ§Ù…ÙƒÙ… ÙƒÙ„Ù‡Ø§ Ø³Ø¹Ø§Ø¯Ø© ÙˆØ·Ø§Ø¹Ø©</textarea>
    </div>

    <div class="control-group">
      <label>âœï¸ Ø§Ø³Ù… Ø§Ù„Ù…Ø±Ø³Ù„</label>
      <input type="text" id="senderInput" placeholder="Ø§Ø³Ù…Ùƒ Ù‡Ù†Ø§..." oninput="updateCard()">
    </div>

    <div class="actions-row">
      <button class="btn-primary" onclick="downloadCard()">
        ğŸ“¥ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø©
      </button>
      <button class="btn-secondary" onclick="copyCard()">
        ğŸ“‹ Ù†Ø³Ø® Ø§Ù„Ù†Øµ
      </button>
    </div>
  </div>

  <!-- Preview -->
  <div class="preview-wrapper">
    <div class="preview-label">ğŸ‘ï¸ Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„Ø¨Ø·Ø§Ù‚Ø©</div>
    <div class="card-preview" id="cardPreview">
      <div class="card-canvas theme-classic" id="cardCanvas">
        <div class="islamic-pattern"></div>
        <div class="card-decorations" id="cardDecorations"></div>
        <div class="card-border-frame"></div>
        <div class="card-corner tl"></div>
        <div class="card-corner tr"></div>
        <div class="card-corner bl"></div>
        <div class="card-corner br"></div>

        <div class="card-crescent-deco">ğŸŒ™</div>
        <div class="card-greeting" id="cardGreeting">Ø±Ù…Ø¶Ø§Ù† ÙƒØ±ÙŠÙ…</div>
        <div class="card-divider"></div>
        <div class="card-message" id="cardMessage">Ø£Ø¹Ø§Ø¯Ù‡ Ø§Ù„Ù„Ù‡ Ø¹Ù„ÙŠÙƒÙ… Ø¨Ø§Ù„Ø®ÙŠØ± ÙˆØ§Ù„Ø¨Ø±ÙƒØ§ØªØŒ ÙˆØ¬Ø¹Ù„ Ø£ÙŠØ§Ù…ÙƒÙ… ÙƒÙ„Ù‡Ø§ Ø³Ø¹Ø§Ø¯Ø© ÙˆØ·Ø§Ø¹Ø©</div>
        <div class="card-sender" id="cardSender"></div>
      </div>
    </div>
  </div>
</section>

<!-- Ready-Made Gallery -->
<section class="gallery-section">
  <h2>ğŸ® Ø¨Ø·Ø§Ù‚Ø§Øª Ø¬Ø§Ù‡Ø²Ø©</h2>
  <div class="gallery-grid" id="galleryGrid"></div>
</section>

<!-- Footer -->
<footer class="footer">
  <p>Ø±Ù…Ø¶Ø§Ù† Ù…Ø¨Ø§Ø±Ùƒ ğŸŒ™ ØªÙ‚Ø¨Ù‘Ù„ Ø§Ù„Ù„Ù‡ Ù…Ù†Ù‘Ø§ ÙˆÙ…Ù†ÙƒÙ… ØµØ§Ù„Ø­ Ø§Ù„Ø£Ø¹Ù…Ø§Ù„</p>
</footer>

<!-- Modal -->
<div class="modal-overlay" id="modalOverlay" onclick="closeModal(event)">
  <div class="modal-content">
    <h3>âœ… ØªÙ… Ø¨Ù†Ø¬Ø§Ø­!</h3>
    <p id="modalText">ØªÙ… Ù†Ø³Ø® Ù†Øµ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© Ø¥Ù„Ù‰ Ø§Ù„Ø­Ø§ÙØ¸Ø©</p>
    <button class="modal-close" onclick="closeModal()">Ø­Ø³Ù†Ø§Ù‹</button>
  </div>
</div>

<!-- Toast -->
<div class="toast" id="toast"></div>

<script>
  // ===== Stars =====
  const starsContainer = document.getElementById('starsContainer');
  for (let i = 0; i < 100; i++) {
    const star = document.createElement('div');
    star.className = 'star';
    star.style.left = Math.random() * 100 + '%';
    star.style.top = Math.random() * 100 + '%';
    star.style.setProperty('--dur', (2 + Math.random() * 4) + 's');
    star.style.animationDelay = Math.random() * 4 + 's';
    star.style.width = star.style.height = (1 + Math.random() * 2) + 'px';
    starsContainer.appendChild(star);
  }

  // ===== Card Decorations =====
  function createCardDecorations() {
    const deco = document.getElementById('cardDecorations');
    deco.innerHTML = '';

    // Lanterns
    const lanternPositions = [
      { top: '5%', right: '8%', size: '2rem', delay: '0s' },
      { top: '8%', left: '10%', size: '1.8rem', delay: '1s' },
      { top: '15%', right: '20%', size: '1.4rem', delay: '0.5s' },
    ];

    lanternPositions.forEach(pos => {
      const lantern = document.createElement('div');
      lantern.className = 'card-lantern';
      lantern.textContent = 'ğŸ®';
      lantern.style.top = pos.top;
      if (pos.right) lantern.style.right = pos.right;
      if (pos.left) lantern.style.left = pos.left;
      lantern.style.fontSize = pos.size;
      lantern.style.animationDelay = pos.delay;
      deco.appendChild(lantern);
    });

    // Sparkles
    for (let i = 0; i < 12; i++) {
      const sparkle = document.createElement('div');
      sparkle.className = 'card-sparkle';
      sparkle.style.left = (10 + Math.random() * 80) + '%';
      sparkle.style.top = (10 + Math.random() * 80) + '%';
      sparkle.style.setProperty('--dur', (3 + Math.random() * 4) + 's');
      sparkle.style.animationDelay = Math.random() * 5 + 's';
      deco.appendChild(sparkle);
    }

    // Geometric circles
    for (let i = 0; i < 3; i++) {
      const geo = document.createElement('div');
      geo.className = 'card-geometric';
      const size = 100 + Math.random() * 200;
      geo.style.width = geo.style.height = size + 'px';
      geo.style.left = (-30 + Math.random() * 60) + '%';
      geo.style.top = (20 + Math.random() * 60) + '%';
      deco.appendChild(geo);
    }
  }
  createCardDecorations();

  // ===== Theme Selector =====
  let currentTheme = 'classic';

  function selectTheme(theme, btn) {
    currentTheme = theme;
    document.querySelectorAll('.template-btn').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');

    const canvas = document.getElementById('cardCanvas');
    canvas.className = 'card-canvas theme-' + theme;
    createCardDecorations();
  }

  // ===== Update Card =====
  function updateCard() {
    const greeting = document.getElementById('greetingInput').value;
    const message = document.getElementById('messageInput').value;
    const sender = document.getElementById('senderInput').value;

    document.getElementById('cardGreeting').textContent = greeting || 'Ø±Ù…Ø¶Ø§Ù† ÙƒØ±ÙŠÙ…';
    document.getElementById('cardMessage').textContent = message || '';
    document.getElementById('cardSender').textContent = sender ? 'â€” ' + sender : '';
  }

  // ===== Download Card =====
  async function downloadCard() {
    showToast('â³ Ø¬Ø§Ø±ÙŠ ØªØ¬Ù‡ÙŠØ² Ø§Ù„Ø¨Ø·Ø§Ù‚Ø©...');

    try {
      const card = document.getElementById('cardPreview');
      const canvas = document.createElement('canvas');
      const rect = card.getBoundingClientRect();
      const scale = 2;
      canvas.width = rect.width * scale;
      canvas.height = rect.height * scale;
      const ctx = canvas.getContext('2d');
      ctx.scale(scale, scale);

      // Draw background gradient
      const themeColors = {
        classic: ['#0A1628', '#0F2042', '#1A3060'],
        emerald: ['#0B3D2E', '#1B6B4A', '#0D4F4F'],
        purple: ['#1A0A2E', '#2D1B4E', '#1A0A2E'],
        sunset: ['#4A1A00', '#8B3A0F', '#C45A1A'],
        white: ['#FFFEF5', '#F5ECD7', '#EDE3C8'],
        teal: ['#042F2E', '#0D4F4F', '#134E4A']
      };

      const colors = themeColors[currentTheme];
      const gradient = ctx.createLinearGradient(0, 0, 0, rect.height);
      gradient.addColorStop(0, colors[0]);
      gradient.addColorStop(0.5, colors[1]);
      gradient.addColorStop(1, colors[2]);
      ctx.fillStyle = gradient;
      ctx.roundRect(0, 0, rect.width, rect.height, 20);
      ctx.fill();

      // Border frame
      ctx.strokeStyle = 'rgba(212, 165, 72, 0.2)';
      ctx.lineWidth = 1;
      ctx.roundRect(12, 12, rect.width - 24, rect.height - 24, 12);
      ctx.stroke();

      // Text color
      const isWhite = currentTheme === 'white';
      const textColor = isWhite ? '#2A1F0A' : '#FFF8E7';
      const goldColor = isWhite ? '#B8860B' : '#F0D78C';

      const centerX = rect.width / 2;
      let y = rect.height * 0.28;

      // Crescent
      ctx.font = '48px serif';
      ctx.textAlign = 'center';
      ctx.fillStyle = textColor;
      ctx.fillText('â˜ª', centerX, y);
      y += 50;

      // Greeting
      const greeting = document.getElementById('greetingInput').value || 'Ø±Ù…Ø¶Ø§Ù† ÙƒØ±ÙŠÙ…';
      ctx.font = "bold 32px 'Reem Kufi', 'Tajawal', sans-serif";
      ctx.fillStyle = goldColor;
      ctx.fillText(greeting, centerX, y);
      y += 30;

      // Divider
      const divGrad = ctx.createLinearGradient(centerX - 40, y, centerX + 40, y);
      divGrad.addColorStop(0, 'transparent');
      divGrad.addColorStop(0.5, goldColor);
      divGrad.addColorStop(1, 'transparent');
      ctx.strokeStyle = divGrad;
      ctx.lineWidth = 2;
      ctx.beginPath();
      ctx.moveTo(centerX - 40, y);
      ctx.lineTo(centerX + 40, y);
      ctx.stroke();
      y += 30;

      // Message
      const message = document.getElementById('messageInput').value;
      if (message) {
        ctx.font = "18px 'Amiri', 'Tajawal', serif";
        ctx.fillStyle = isWhite ? 'rgba(42, 31, 10, 0.85)' : 'rgba(255, 248, 231, 0.85)';
        const words = message.split(' ');
        let line = '';
        const maxWidth = rect.width * 0.75;

        for (const word of words) {
          const testLine = line + word + ' ';
          if (ctx.measureText(testLine).width > maxWidth && line) {
            ctx.fillText(line.trim(), centerX, y);
            line = word + ' ';
            y += 28;
          } else {
            line = testLine;
          }
        }
        ctx.fillText(line.trim(), centerX, y);
        y += 35;
      }

      // Sender
      const sender = document.getElementById('senderInput').value;
      if (sender) {
        ctx.font = "16px 'Tajawal', sans-serif";
        ctx.fillStyle = goldColor;
        ctx.fillText('â€” ' + sender, centerX, y);
      }

      // Download
      canvas.toBlob(blob => {
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = 'ramadan-card.png';
        a.click();
        URL.revokeObjectURL(url);
        showToast('âœ… ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© Ø¨Ù†Ø¬Ø§Ø­!');
      }, 'image/png');
    } catch(e) {
      showToast('âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ØªØ­Ù…ÙŠÙ„');
      console.error(e);
    }
  }

  // ===== Copy Text =====
  function copyCard() {
    const greeting = document.getElementById('greetingInput').value || 'Ø±Ù…Ø¶Ø§Ù† ÙƒØ±ÙŠÙ…';
    const message = document.getElementById('messageInput').value;
    const sender = document.getElementById('senderInput').value;

    let text = `ğŸŒ™ ${greeting} ğŸŒ™\n\n`;
    if (message) text += `${message}\n\n`;
    if (sender) text += `â€” ${sender}`;

    navigator.clipboard.writeText(text).then(() => {
      showToast('âœ… ØªÙ… Ù†Ø³Ø® Ø§Ù„Ù†Øµ Ø¨Ù†Ø¬Ø§Ø­!');
    }).catch(() => {
      showToast('âŒ ÙØ´Ù„ Ø§Ù„Ù†Ø³Ø®');
    });
  }

  // ===== Toast =====
  function showToast(msg) {
    const toast = document.getElementById('toast');
    toast.textContent = msg;
    toast.classList.add('show');
    setTimeout(() => toast.classList.remove('show'), 2500);
  }

  // ===== Modal =====
  function closeModal(e) {
    if (e && e.target !== document.getElementById('modalOverlay') && !e.target.classList.contains('modal-close')) return;
    document.getElementById('modalOverlay').classList.remove('active');
  }

  // ===== Ready-Made Cards =====
  const readyCards = [
    {
      theme: 'classic',
      greeting: 'Ø±Ù…Ø¶Ø§Ù† ÙƒØ±ÙŠÙ…',
      message: 'ÙƒÙ„ Ø¹Ø§Ù… ÙˆØ£Ù†ØªÙ… Ø¨Ø®ÙŠØ± Ø¨Ù…Ù†Ø§Ø³Ø¨Ø© Ø­Ù„ÙˆÙ„ Ø´Ù‡Ø± Ø±Ù…Ø¶Ø§Ù† Ø§Ù„Ù…Ø¨Ø§Ø±Ùƒ',
    },
    {
      theme: 'emerald',
      greeting: 'Ø±Ù…Ø¶Ø§Ù† Ù…Ø¨Ø§Ø±Ùƒ',
      message: 'Ø£Ø³Ø£Ù„ Ø§Ù„Ù„Ù‡ Ø£Ù† ÙŠØ¨Ù„ØºÙƒÙ… Ø±Ù…Ø¶Ø§Ù† ÙˆØ£Ù†ØªÙ… ÙÙŠ Ø£Ø­Ø³Ù† Ø­Ø§Ù„',
    },
    {
      theme: 'purple',
      greeting: 'Ù…Ø¨Ø§Ø±Ùƒ Ø¹Ù„ÙŠÙƒÙ… Ø§Ù„Ø´Ù‡Ø±',
      message: 'Ø¬Ø¹Ù„ Ø§Ù„Ù„Ù‡ Ø±Ù…Ø¶Ø§Ù† Ø´Ù‡Ø± Ø®ÙŠØ± ÙˆØ¨Ø±ÙƒØ© ÙˆØ¹ØªÙ‚ Ù…Ù† Ø§Ù„Ù†Ø§Ø±',
    },
    {
      theme: 'sunset',
      greeting: 'Ø£Ù‡Ù„Ø§Ù‹ Ø±Ù…Ø¶Ø§Ù†',
      message: 'Ø§Ù„Ù„Ù‡Ù… Ø¨Ù„Ù‘ØºÙ†Ø§ Ø±Ù…Ø¶Ø§Ù† ÙˆØ§Ø±Ø²Ù‚Ù†Ø§ ØµÙŠØ§Ù…Ù‡ ÙˆÙ‚ÙŠØ§Ù…Ù‡ Ø¥ÙŠÙ…Ø§Ù†Ø§Ù‹ ÙˆØ§Ø­ØªØ³Ø§Ø¨Ø§Ù‹',
    },
    {
      theme: 'white',
      greeting: 'Ø´Ù‡Ø± Ø§Ù„Ø®ÙŠØ± ÙˆØ§Ù„Ø¨Ø±ÙƒØ§Øª',
      message: 'Ù†Ø³Ø£Ù„ Ø§Ù„Ù„Ù‡ Ø£Ù† ÙŠØªÙ‚Ø¨Ù„ Ù…Ù†Ø§ ÙˆÙ…Ù†ÙƒÙ… Ø§Ù„ØµÙŠØ§Ù… ÙˆØ§Ù„Ù‚ÙŠØ§Ù… ÙˆØµØ§Ù„Ø­ Ø§Ù„Ø£Ø¹Ù…Ø§Ù„',
    },
    {
      theme: 'teal',
      greeting: 'Ø±Ù…Ø¶Ø§Ù† ÙŠØ¬Ù…Ø¹Ù†Ø§',
      message: 'Ø§Ù„Ù„Ù‡Ù… Ø§Ø¬Ø¹Ù„ Ù‡Ø°Ø§ Ø§Ù„Ø´Ù‡Ø± Ø´Ù‡Ø± Ø±Ø­Ù…Ø© ÙˆÙ…ØºÙØ±Ø© ÙˆØ¹ØªÙ‚ Ù…Ù† Ø§Ù„Ù†ÙŠØ±Ø§Ù†',
    },
  ];

  const galleryGrid = document.getElementById('galleryGrid');

  readyCards.forEach((card, idx) => {
    const themeColors = {
      classic: 'linear-gradient(180deg, #0A1628, #0F2042, #1A3060)',
      emerald: 'linear-gradient(160deg, #0B3D2E, #1B6B4A, #0D4F4F)',
      purple: 'linear-gradient(160deg, #1A0A2E, #2D1B4E, #1A0A2E)',
      sunset: 'linear-gradient(160deg, #4A1A00, #8B3A0F, #C45A1A)',
      white: 'linear-gradient(180deg, #FFFEF5, #F5ECD7, #EDE3C8)',
      teal: 'linear-gradient(160deg, #042F2E, #0D4F4F, #134E4A)',
    };

    const isWhite = card.theme === 'white';
    const textColor = isWhite ? '#2A1F0A' : '#FFF8E7';
    const goldColor = isWhite ? '#B8860B' : '#F0D78C';

    const el = document.createElement('div');
    el.className = 'gallery-card';
    el.style.background = themeColors[card.theme];
    el.innerHTML = `
      <div style="display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;padding:30px;text-align:center;position:relative;">
        <div style="position:absolute;inset:10px;border:1px solid rgba(212,165,72,0.15);border-radius:10px;pointer-events:none;"></div>
        <div style="font-size:3rem;margin-bottom:8px;filter:drop-shadow(0 0 15px rgba(212,165,72,0.5));">ğŸŒ™</div>
        <div style="font-family:'Reem Kufi',sans-serif;font-size:1.5rem;font-weight:700;color:${goldColor};margin-bottom:12px;line-height:1.4;">${card.greeting}</div>
        <div style="width:50px;height:1.5px;background:linear-gradient(90deg,transparent,${goldColor},transparent);margin:0 auto 12px;"></div>
        <div style="font-family:'Amiri',serif;font-size:0.9rem;color:${textColor};opacity:0.8;line-height:1.8;max-width:90%;">${card.message}</div>
      </div>
      <div class="gallery-card-overlay"><span>Ø§Ø³ØªØ®Ø¯Ù… Ù‡Ø°Ø§ Ø§Ù„Ù‚Ø§Ù„Ø¨</span></div>
    `;

    el.addEventListener('click', () => {
      document.getElementById('greetingInput').value = card.greeting;
      document.getElementById('messageInput').value = card.message;

      // select theme
      const btn = document.querySelector(`[data-theme="${card.theme}"]`);
      selectTheme(card.theme, btn);
      updateCard();

      window.scrollTo({ top: 0, behavior: 'smooth' });
      showToast('âœ… ØªÙ… ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ù‚Ø§Ù„Ø¨!');
    });

    galleryGrid.appendChild(el);
  });
</script>
</body>
</html>